<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Venue Management</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            
        </style>
    </h:head>   
    <h:body >
        <ui:include src="index.xhtml"/>
     <!-- Add Venue Modal --> 
<div class="flex bg-orange-200 w-full justify-center items-center py-10">
    <div class="bg-white p-8 rounded shadow-md w-full max-w-5xl">
        <f:view>
            <h:form>
                <h3 class="text-2xl font-bold mb-6 text-center">Add Venue</h3>
                <div class="grid grid-cols-3 gap-6">
                    <!-- Venuename -->
                    <div class="form-field">
                        <h:outputText value="venuename" class="block mb-2 font-medium">Venue Name:</h:outputText>
                        <h:inputText id="venuename" value="#{showVenue.venuetable.venuename}" title="Venuename" 
                                     required="true" requiredMessage="The Venuename field is required." class="border rounded w-full p-2"/>
                    </div>

                    <!-- Location -->
                    <div class="form-field">
                        <h:outputText value="location" class="block mb-2 font-medium">Location:</h:outputText>
                        <h:inputText id="location" value="#{showVenue.venuetable.location}" title="Location" 
                                     required="true" requiredMessage="The Location field is required." class="border rounded w-full p-2"/>
                    </div>

                    <!-- Description -->
                    <div class="form-field">
                        <h:outputText value="description" class="block mb-2 font-medium">Description:</h:outputText>
                        <h:inputTextarea id="description" rows="4" cols="30" value="#{showVenue.venuetable.description}" 
                                         title="Description" required="true" requiredMessage="The Description field is required." 
                                         class="border rounded w-full p-2"/>
                    </div>

                    <!-- Image -->
                    <div class="form-field">
                        <h:outputText value="image" class="block mb-2 font-medium">Image:</h:outputText>
                        <h:inputText id="image" value="#{showVenue.venuetable.image}" title="Image" 
                                     class="border rounded w-full p-2"/>
                    </div>

                    <!-- Final Price -->
                    <div class="form-field">
                        <h:outputText value="finalprice" class="block mb-2 font-medium">Final Price:</h:outputText>
                        <h:inputText id="finalprice" value="#{showVenue.venuetable.finalprice}" title="Finalprice" 
                                     required="true" requiredMessage="The Finalprice field is required." class="border rounded w-full p-2"/>
                    </div>

                    <!-- Booking Advance Price -->
                    <div class="form-field">
                        <h:outputText value="bookingadvanceprice" class="block mb-2 font-medium">Booking Advance Price:</h:outputText>
                        <h:inputText id="bookingadvanceprice" value="#{showVenue.venuetable.bookingadvanceprice}" 
                                     title="Bookingadvanceprice" required="true" 
                                     requiredMessage="The Bookingadvanceprice field is required." class="border rounded w-full p-2"/>
                    </div>

                    <!-- Capacity -->
                    <div class="form-field">
                        <h:outputText value="capacity" class="block mb-2 font-medium">Capacity:</h:outputText>
                        <h:inputText id="capacity" value="#{showVenue.venuetable.capacity}" title="Capacity" 
                                     required="true" requiredMessage="The Capacity field is required." class="border rounded w-full p-2"/>
                    </div>

                    <!-- User ID -->
                    <div class="form-field">
                        <h:outputText value="userId" class="block mb-2 font-medium">User ID:</h:outputText>
                        <h:selectOneMenu id="userId" value="#{showVenue.venuetable.userId}" title="UserId" class="border rounded w-full p-2">
                            <f:selectItem itemValue="" itemLabel="Select ID" noSelectionOption="true" />
                            <f:selectItem itemValue="4" itemLabel="4" />
                        </h:selectOneMenu>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center mt-8">
                    <h:commandButton action="#{showVenue.insertVenue()}" value="Add Venue" 
                                     class="bg-blue-500 text-white py-2 px-6 rounded shadow hover:bg-blue-600"/>
                </div>
            </h:form>
        </f:view>
    </div>
</div>



























        <h:form>
            <h:panelGroup id="venueList">
                <div class="container mx-auto p-4">
                    <!-- Search and Button Controls -->
                    <div class="flex justify-between items-center mb-4">
                        <h:inputText value="#{dashboardBean.searchQuery}"
                                     pt:placeholder="Enter Search Value"
                                     styleClass="border p-2 rounded w-1/4" />


                        <!--                        <div>
                                                    <a >
                                                        <h:commandButton value="Add Venue" 
                                                                         onclick="openAddVenueModal(); return false;" 
                                                                         styleClass="bg-orange-500 text-black px-4 py-2 rounded" />
                                                    </a>
                                                </div>-->
                    </div>

                    <!-- Table -->
                    <h:dataTable value="#{showVenue.findAll()}" var="item"
                                 styleClass="min-w-full table-auto border-collapse text-center "
                                 headerClass="bg-orange-100" rowClasses="hover:bg-gray-100">
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Name" />
                            </f:facet>
                            <h:outputText value="#{item.venuename}" />
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Image" />
                            </f:facet>
                            <h:panelGroup>
                                <c:if test="#{item.image.startsWith('http')}">
                                    <h:graphicImage value="#{item.image}" style="max-width: 100px; max-height: 100px;" />
                                </c:if>
                                <c:if test="#{!item.image.startsWith('http')}">
                                    <h:graphicImage value="../resources/images/#{item.image}" style="max-width: 100px; max-height: 100px;" />
                                </c:if>
                            </h:panelGroup>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Location" />
                            </f:facet>
                            <h:outputText value="#{item.location}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Capacity" />
                            </f:facet>
                            <h:outputText value="#{item.capacity}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Price" />
                            </f:facet>
                            <h:outputText value="#{item.finalprice}" />
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Edit" />
                            </f:facet>
                            <h:commandButton value="Edit"
                                             styleClass="bg-orange-500 text-black px-4 py-1 rounded"
                                             action="#{showVenue.updateVenue(item)}">
                            </h:commandButton>
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Delete" />
                            </f:facet>
                            <h:commandButton value="Delete"
                                             styleClass="bg-orange-500 text-black px-4 py-1 rounded"
                                             action="#{showVenue.deleteVenue(item)}" 
                                             onclick="return confirm('Are you sure to delete (Y/N)?')">
                                <!--<f:ajax render="venueList" />-->   
                            </h:commandButton>

                        </h:column>
                    </h:dataTable>

                </div>
            </h:panelGroup>
        </h:form>

    </h:body>
</html>
